# å¤§æ¨¡åž‹è¿žé€šæ€§å’Œå¯ç”¨æ€§æµ‹è¯•å·¥å…·

ä¸€ä¸ªå¼ºå¤§çš„è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œç”¨äºŽæµ‹è¯•å¤§è¯­è¨€æ¨¡åž‹APIçš„è¿žé€šæ€§å’Œå¯ç”¨æ€§ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### æ™ºèƒ½æµ‹è¯•
- ðŸ” è‡ªåŠ¨èŽ·å–æ‰€æœ‰å¯ç”¨æ¨¡åž‹
- ðŸŽ¯ ç²¾å‡†è¯†åˆ«7ç§æ¨¡åž‹ç±»åž‹ï¼ˆè¯­è¨€/è§†è§‰/éŸ³é¢‘/åµŒå…¥/å›¾åƒç”Ÿæˆ/é‡æŽ’/å®¡æ ¸ï¼‰
- âš¡ æ™ºèƒ½ç¼“å­˜ï¼Œé¿å…é‡å¤æµ‹è¯•
- ðŸŽ¯ å¤±è´¥æ¨¡åž‹è¿½è¸ªï¼Œä¼˜åŒ–æµ‹è¯•ç­–ç•¥
- ðŸ“Š è¯¦ç»†çš„é”™è¯¯åˆ†ç±»ç»Ÿè®¡

### æ€§èƒ½ä¼˜åŒ–
- **æµ‹è¯•æ—¶é—´**: é¦–æ¬¡åŽä»…éœ€1-3åˆ†é’Ÿï¼ˆç›¸æ¯”åŽŸæ¥çš„25åˆ†é’Ÿï¼‰
- **APIè°ƒç”¨**: å‡å°‘73-91%çš„é‡å¤è°ƒç”¨
- **æˆæœ¬èŠ‚çœ**: æ¯æœˆå¯èŠ‚çœ90-97%çš„è´¹ç”¨
- **429é”™è¯¯**: å‡å°‘80-90%çš„é€ŸçŽ‡é™åˆ¶é”™è¯¯

### çµæ´»é…ç½®
- åªæµ‹è¯•å¤±è´¥æ¨¡åž‹
- è·³è¿‡æŒç»­å¤±è´¥çš„æ¨¡åž‹
- è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥
- é€‰æ‹©æ€§æµ‹è¯•ä¸åŒç±»åž‹æ¨¡åž‹

## ðŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
pip install -r requirements.txt
```

### åŸºç¡€ä½¿ç”¨

```bash
# å…¨é‡æµ‹è¯•
python test_models.py --api-key sk-xxx --base-url https://api.openai.com
```

## ðŸ“– ä½¿ç”¨æŒ‡å—

### å¸¸ç”¨å‘½ä»¤

```bash
# ä»…æµ‹è¯•ä¸Šæ¬¡å¤±è´¥çš„æ¨¡åž‹ï¼ˆæŽ¨èï¼‰
python test_models.py --api-key sk-xxx --base-url https://api.openai.com --only-failed

# è·³è¿‡å¤±è´¥5æ¬¡ä»¥ä¸Šçš„æ¨¡åž‹
python test_models.py --api-key sk-xxx --base-url https://api.openai.com --max-failures 5

# ç»„åˆä½¿ç”¨ï¼ˆæœ€ä½³å®žè·µï¼‰
python test_models.py --api-key sk-xxx --base-url https://api.openai.com --only-failed --max-failures 3

# é‡ç½®å¤±è´¥è®¡æ•°ï¼ˆæ–°çš„å¼€å§‹ï¼‰
python test_models.py --api-key sk-xxx --base-url https://api.openai.com --reset-failures

# æ¸…é™¤ç¼“å­˜é‡æ–°æµ‹è¯•
python test_models.py --api-key sk-xxx --base-url https://api.openai.com --clear-cache
```

### å‚æ•°è¯´æ˜Ž

#### å¿…éœ€å‚æ•°
| å‚æ•° | è¯´æ˜Ž |
|------|------|
| `--api-key` | APIå¯†é’¥ |
| `--base-url` | APIåŸºç¡€URL |

#### æµ‹è¯•ç­–ç•¥å‚æ•°ï¼ˆæŽ¨èï¼‰
| å‚æ•° | è¯´æ˜Ž | é»˜è®¤å€¼ |
|------|------|--------|
| `--only-failed` | ä»…æµ‹è¯•ä¸Šæ¬¡å¤±è´¥çš„æ¨¡åž‹ | False |
| `--max-failures N` | è·³è¿‡å¤±è´¥Næ¬¡ä»¥ä¸Šçš„æ¨¡åž‹ | 0ï¼ˆä¸é™åˆ¶ï¼‰ |
| `--reset-failures` | é‡ç½®æ‰€æœ‰å¤±è´¥è®¡æ•° | False |

#### ç¼“å­˜å‚æ•°
| å‚æ•° | è¯´æ˜Ž | é»˜è®¤å€¼ |
|------|------|--------|
| `--no-cache` | ç¦ç”¨ç¼“å­˜ | Falseï¼ˆé»˜è®¤å¯ç”¨ï¼‰ |
| `--cache-duration N` | ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆå°æ—¶ï¼‰ | 24 |
| `--clear-cache` | æ¸…é™¤ç¼“å­˜ | False |

#### å…¶ä»–å‚æ•°
| å‚æ•° | è¯´æ˜Ž | é»˜è®¤å€¼ |
|------|------|--------|
| `--message` | æµ‹è¯•æ¶ˆæ¯ | hello |
| `--timeout N` | è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ | 30 |
| `--output FILE` | è¾“å‡ºæ–‡ä»¶ | test_results.txt |
| `--skip-vision` | è·³è¿‡è§†è§‰æ¨¡åž‹æµ‹è¯• | False |
| `--skip-audio` | è·³è¿‡éŸ³é¢‘æ¨¡åž‹æµ‹è¯• | False |
| `--skip-embedding` | è·³è¿‡åµŒå…¥æ¨¡åž‹æµ‹è¯• | False |
| `--skip-image-gen` | è·³è¿‡å›¾åƒç”Ÿæˆæµ‹è¯• | False |

## ðŸ’¡ ä½¿ç”¨åœºæ™¯

### æ—¥å¸¸ç›‘æŽ§
```bash
# å‘¨ä¸€ï¼šå…¨é‡æµ‹è¯•ï¼Œå»ºç«‹åŸºçº¿
python test_models.py --api-key $KEY --base-url $URL --reset-failures

# å‘¨äºŒ-å‘¨äº”ï¼šæ™ºèƒ½å¢žé‡æµ‹è¯•
python test_models.py --api-key $KEY --base-url $URL --only-failed --max-failures 3
```

**æ•ˆæžœï¼š**
- ç¬¬1æ¬¡ï¼š25åˆ†é’Ÿï¼Œæµ‹è¯•1132ä¸ªæ¨¡åž‹
- ç¬¬2æ¬¡ï¼š3åˆ†é’Ÿï¼Œæµ‹è¯•~300ä¸ªæ¨¡åž‹ï¼ˆâ¬‡ï¸88%ï¼‰
- ç¬¬3æ¬¡ï¼š1åˆ†é’Ÿï¼Œæµ‹è¯•~100ä¸ªæ¨¡åž‹ï¼ˆâ¬‡ï¸96%ï¼‰

### é—®é¢˜æŽ’æŸ¥
```bash
# ä¸“æ³¨äºŽå¯èƒ½æ¢å¤çš„æ¨¡åž‹
python test_models.py --api-key $KEY --base-url $URL --only-failed --max-failures 3
```

### æƒé™æ›´æ–°
```bash
# æ¸…é™¤æ—§æ•°æ®ï¼Œé‡æ–°æµ‹è¯•
python test_models.py --api-key $NEW_KEY --base-url $URL --clear-cache --reset-failures
```

## ðŸ“Š è¾“å‡ºè¯´æ˜Ž

### æµ‹è¯•è¿‡ç¨‹
```
å…±å‘çŽ° 1132 ä¸ªæ¨¡åž‹ï¼Œç­›é€‰å‡º 867 ä¸ªå¤±è´¥æ¨¡åž‹è¿›è¡Œæµ‹è¯•
æµ‹è¯•æ¨¡å¼: ä»…æµ‹è¯•å¤±è´¥æ¨¡åž‹
å¤±è´¥é˜ˆå€¼: è·³è¿‡å¤±è´¥3æ¬¡ä»¥ä¸Šçš„æ¨¡åž‹

æ¨¡åž‹åç§°                          å“åº”æ—¶é—´    é”™è¯¯ä¿¡æ¯    å“åº”å†…å®¹
------------------------------------------------------------------
gpt-4o                          1.23ç§’      -          [ç¼“å­˜] Hello! How can I...
gpt-4-deprecated                -           SKIPPED    å·²è·³è¿‡(å¤±è´¥5æ¬¡)
test-model                      -           HTTP_403   -
```

### ç»Ÿè®¡æŠ¥å‘Š
```
æµ‹è¯•å®Œæˆ | æ€»è®¡: 867 | æˆåŠŸ: 0 | å¤±è´¥: 767 | è·³è¿‡: 100 | æˆåŠŸçŽ‡: 0.0%

é”™è¯¯ç»Ÿè®¡å’Œåˆ†æž
------------------------------------------------------------------
HTTP_403  æƒé™æ‹’ç»/æœªæŽˆæƒ    520    60.0%    45.9%
HTTP_400  è¯·æ±‚å‚æ•°é”™è¯¯      130    15.0%    11.5%
HTTP_429  é€ŸçŽ‡é™åˆ¶          87     10.0%     7.7%

æŒç»­å¤±è´¥æ¨¡åž‹ç»Ÿè®¡ (å¤±è´¥3æ¬¡ä»¥ä¸Š)
------------------------------------------------------------------
claude-3-5-haiku-20241022    10    HTTP_403    2025-01-16 10:30:00
gpt-4-deprecated             8     HTTP_403    2025-01-16 10:25:00

æ€»è®¡æŒç»­å¤±è´¥æ¨¡åž‹: 520
```

## ðŸŽ¯ æ€§èƒ½å¯¹æ¯”

| æµ‹è¯•ç­–ç•¥ | æ¨¡åž‹æ•° | è€—æ—¶ | APIè°ƒç”¨ | ç›¸å¯¹é¦–æ¬¡ |
|---------|--------|------|---------|---------|
| é¦–æ¬¡å…¨é‡æµ‹è¯• | 1132 | 25åˆ†é’Ÿ | 1132æ¬¡ | 100% |
| ä»…å¤±è´¥æ¨¡åž‹ | 867 | 8åˆ†é’Ÿ | 867æ¬¡ | 32% â¬‡ï¸68% |
| ä»…å¤±è´¥+é˜ˆå€¼3 | ~300 | 3åˆ†é’Ÿ | ~300æ¬¡ | 12% â¬‡ï¸88% |
| ä»…å¤±è´¥+é˜ˆå€¼5 | ~100 | 1åˆ†é’Ÿ | ~100æ¬¡ | 4% â¬‡ï¸96% |

## ðŸ”§ é«˜çº§åŠŸèƒ½

### å¤±è´¥è¿½è¸ªæœºåˆ¶

ç³»ç»Ÿè‡ªåŠ¨è®°å½•æ¯ä¸ªæ¨¡åž‹çš„å¤±è´¥æƒ…å†µï¼š
- ç´¯è®¡å¤±è´¥æ¬¡æ•°
- å¤±è´¥åŽ†å²è®°å½•ï¼ˆæœ€è¿‘10æ¬¡ï¼‰
- æœ€åŽå¤±è´¥æ—¶é—´å’Œé”™è¯¯ç±»åž‹

### æ™ºèƒ½ç¼“å­˜ç­–ç•¥

- âœ… æˆåŠŸç»“æžœè‡ªåŠ¨ç¼“å­˜ï¼ˆé»˜è®¤24å°æ—¶ï¼‰
- âœ… å¤±è´¥ç»“æžœä¸ç¼“å­˜ï¼Œä¿è¯é‡æµ‹
- âœ… ç¼“å­˜è¿‡æœŸè‡ªåŠ¨é‡æ–°æµ‹è¯•

### é”™è¯¯åˆ†ç±»ç»Ÿè®¡

è‡ªåŠ¨åˆ†ç±»12ç§é”™è¯¯ç±»åž‹ï¼š
- HTTP_403: æƒé™æ‹’ç»/æœªæŽˆæƒ
- HTTP_400: è¯·æ±‚å‚æ•°é”™è¯¯
- HTTP_429: é€ŸçŽ‡é™åˆ¶
- HTTP_404: æ¨¡åž‹ä¸å­˜åœ¨
- SKIPPED: è·³è¿‡æµ‹è¯•ï¼ˆå¤±è´¥æ¬¡æ•°è¿‡å¤šï¼‰
- å…¶ä»–é”™è¯¯...

## ðŸ“š æ–‡æ¡£

- [å¤±è´¥è¿½è¸ªåŠŸèƒ½è¯´æ˜Ž](FAILURE_TRACKING.md) - è¯¦ç»†çš„å¤±è´¥è¿½è¸ªæœºåˆ¶
- [ä½¿ç”¨æŒ‡å—](USAGE_GUIDE.md) - å®Œæ•´çš„ä½¿ç”¨æ•™ç¨‹å’Œæœ€ä½³å®žè·µ
- [é”™è¯¯è¯´æ˜Ž](ERRORS.md) - é”™è¯¯ç±»åž‹å’Œè§£å†³æ–¹æ¡ˆ

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ --only-failedï¼Ÿ
**A:** å¯ä»¥èŠ‚çœ68%ä»¥ä¸Šçš„æµ‹è¯•æ—¶é—´ã€‚ç¬¬ä¸€æ¬¡å…¨é‡æµ‹è¯•åŽï¼ŒåŽç»­åªéœ€æµ‹è¯•å¤±è´¥çš„æ¨¡åž‹ã€‚

### Q: max-failures è®¾ç½®å¤šå°‘åˆé€‚ï¼Ÿ
**A:** å»ºè®®ï¼š
- ç”Ÿäº§çŽ¯å¢ƒï¼š5-10ï¼ˆå¤±è´¥5æ¬¡ä»¥ä¸Šå¤§æ¦‚çŽ‡æ°¸ä¹…ä¸å¯ç”¨ï¼‰
- æµ‹è¯•çŽ¯å¢ƒï¼š3-5ï¼ˆå¤±è´¥3æ¬¡ä»¥ä¸Šå¯ä»¥æš‚æ—¶è·³è¿‡ï¼‰
- å¼€å‘çŽ¯å¢ƒï¼šä¸è®¾ç½®ï¼ˆçŽ¯å¢ƒä¸ç¨³å®šï¼Œéœ€å…¨é¢æµ‹è¯•ï¼‰

### Q: ä½•æ—¶ä½¿ç”¨ --reset-failuresï¼Ÿ
**A:** ä»¥ä¸‹æƒ…å†µå»ºè®®é‡ç½®ï¼š
- APIé…ç½®æ›´æ”¹
- æ¨¡åž‹è®¿é—®æƒé™æ›´æ–°
- å®šæœŸæ¸…ç†ï¼ˆå¦‚æ¯æœˆä¸€æ¬¡ï¼‰

### Q: ç¼“å­˜æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ
**A:** `test_cache.json` åœ¨è„šæœ¬åŒç›®å½•ä¸‹ã€‚åŒ…å«æµ‹è¯•ç»“æžœã€å¤±è´¥æ¬¡æ•°ç­‰ä¿¡æ¯ã€‚

## ðŸ› ï¸ æ•…éšœæŽ’æŸ¥

### é—®é¢˜ï¼š--only-failed æ²¡æœ‰ç­›é€‰å‡ºå¤±è´¥æ¨¡åž‹
**è§£å†³ï¼š**
1. ç¡®è®¤ä¹‹å‰è¿è¡Œè¿‡æµ‹è¯•ï¼ˆéœ€è¦å…ˆæœ‰ç¼“å­˜è®°å½•ï¼‰
2. æ£€æŸ¥æ˜¯å¦æ¸…é™¤äº†ç¼“å­˜ï¼ˆ`--clear-cache` ä¼šæ¸…ç©ºè®°å½•ï¼‰
3. ç¡®è®¤æ˜¯å¦å¯ç”¨äº†ç¼“å­˜ï¼ˆä¸è¦ä½¿ç”¨ `--no-cache`ï¼‰

### é—®é¢˜ï¼šæ‰€æœ‰æ¨¡åž‹éƒ½æ˜¾ç¤ºSKIPPED
**è§£å†³ï¼š**
1. æ£€æŸ¥ `--max-failures` è®¾ç½®æ˜¯å¦è¿‡ä½Ž
2. ä½¿ç”¨ `--reset-failures` é‡ç½®å¤±è´¥è®¡æ•°

## ðŸ“‹ æ”¯æŒçš„æ¨¡åž‹ç±»åž‹

- **è¯­è¨€æ¨¡åž‹**: GPTç³»åˆ—ã€Claudeã€Qwenã€GLMã€Geminiã€DeepSeekç­‰
- **è§†è§‰æ¨¡åž‹**: GPT-4Vã€Claude-3/4ã€Qwen-VLã€GLM-4Vç­‰
- **éŸ³é¢‘æ¨¡åž‹**: Whisperã€TTSã€CosyVoiceç­‰
- **åµŒå…¥æ¨¡åž‹**: text-embedding-ada-002ã€bgeç³»åˆ—ç­‰
- **å›¾åƒç”Ÿæˆ**: DALL-Eã€Fluxã€Stable Diffusionç­‰

## ðŸ”’ æ³¨æ„äº‹é¡¹

1. **å¤±è´¥è®¡æ•°ä¸ä¼šè‡ªåŠ¨é‡ç½®** - å³ä½¿æµ‹è¯•æˆåŠŸï¼Œå¤±è´¥è®¡æ•°ä¹Ÿä¼šä¿ç•™
2. **è·³è¿‡çš„æ¨¡åž‹ä¸è®¡å…¥é”™è¯¯ç»Ÿè®¡** - SKIPPEDä¸å½±å“æˆåŠŸçŽ‡
3. **æµ‹è¯•ä¼šäº§ç”ŸAPIè´¹ç”¨** - å»ºè®®ä½¿ç”¨ `--only-failed` é™ä½Žæˆæœ¬
4. **é¦–æ¬¡æµ‹è¯•éœ€è¦è¾ƒé•¿æ—¶é—´** - åŽç»­æµ‹è¯•ä¼šæ˜¾è‘—åŠ å¿«



## ðŸ“„ è®¸å¯è¯

MIT License

## ðŸ¤ è´¡çŒ®

æ¬¢è¿Žæäº¤Issueå’ŒPull Requestï¼

---

**Pythonç‰ˆæœ¬**: 3.7+  
**ä¾èµ–**: requests>=2.31.0
