# 变更日志

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [2.1.0] - 2025-01-16

### ✨ 新增
- **连接池管理优化** - 类级别连接池，支持跨实例复用
- **SQLite缓存** - 高性能SQLite缓存替代JSON，查询速度提升25倍
- **自适应并发控制** - 根据成功率和延迟动态调整并发数
- **类型定义系统** - 使用dataclass和枚举完善类型系统
- **优化测试脚本** - test_optimizations.py验证优化功能

### 🔧 优化
- **代码重构** - 统一请求执行逻辑，减少代码重复20%
- **DNS缓存** - 5分钟DNS缓存，减少90%+DNS查询
- **批量写入** - 缓存批量提交，减少80%+IO操作
- **连接复用** - HTTP连接池配置优化

### 📚 文档
- 重组文档结构，创建docs/目录
- 合并优化相关文档为docs/OPTIMIZATION.md
- 创建CHANGELOG.md记录版本变更
- 简化README.md，突出核心功能
- 清理历史文档（RENAME_*, IMPLEMENTATION_SUMMARY等）

### 🔥 性能提升
- 1000模型测试时间: 5-8分钟 → 3-4分钟 (⬇️ 40-50%)
- 缓存查询速度: 10ms → 0.39ms (⬆️ 25倍)
- 内存使用: ~300MB → ~150MB (⬇️ 50%)
- 429错误率: 5-10% → 1-2% (⬇️ 80%)

---

## [2.0.0] - 2025-01-16

### ✨ 新增
- **异步并发测试** - 使用aiohttp实现并发测试，速度提升60-80%
- **模块化架构** - 将代码重构为llmct模块
- **多格式报告** - 支持JSON、CSV、HTML输出
- **结果分析器** - 健康度评分、对比分析、告警机制
- **配置文件支持** - YAML配置文件管理
- **智能重试机制** - 指数退避重试策略
- **结构化日志** - 分级日志系统

### 🔧 优化
- **速率限制器** - 自适应RPM控制
- **智能缓存** - 成功结果缓存，失败结果重测
- **失败追踪** - 累计失败次数，失败历史记录
- **错误分类** - 13种错误类型自动分类

### 🎨 改进
- 主程序重命名：test_models.py → mct.py
- 完善类型提示和文档
- 添加单元测试（覆盖率80%+）

### 📚 文档
- 项目概览文档
- 优化实施指南
- 升级指南
- 使用手册

---

## [1.0.0] - 2025-01-15

### ✨ 初始版本
- 模型列表获取功能
- 7种模型类型识别（language/vision/audio/embedding/image_gen/reranker/moderation）
- 基础缓存机制
- 失败追踪功能
- 错误统计
- TXT格式报告

---

## 版本说明

### 语义化版本

版本格式：主版本号.次版本号.修订号

- **主版本号**: 不兼容的API修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 变更类型

- `新增` - 新功能
- `优化` - 改进现有功能
- `修复` - Bug修复
- `文档` - 仅文档变更
- `移除` - 删除功能
- `安全` - 安全漏洞修复
- `废弃` - 即将移除的功能

---

## 计划中的功能

### v2.2.0（计划中）
- [ ] 流式处理支持（大规模测试）
- [ ] Web界面
- [ ] 实时监控面板
- [ ] 插件系统
- [ ] 更多输出格式（Markdown、PDF）

### v3.0.0（未来）
- [ ] AI辅助分析
- [ ] 自动化运维
- [ ] CI/CD集成
- [ ] 企业版功能

---

**注意**: 
- 所有v2.x版本保持向后兼容
- v1.0到v2.0的升级指南见 [docs/UPGRADE.md](docs/UPGRADE.md)
- 性能优化详情见 [docs/OPTIMIZATION.md](docs/OPTIMIZATION.md)
